# Бот для получения цены криптовалюты

## Бот на питоне, основная библиотека aiogram, весь код полнотью ассинхронный

- зависимости проекта можно установить через файл requirements.txt

> командой

    pip install -r requirements.txt,

Так же у проекта есть виртуальная среда, описанная в Pipfile и Pipfile.lock

Через менеджер зависимостей создаем вирутальное окржение
Используя всего 2 файла:

> 1.  Pipefile (зависимости)
> 2.  Pipefile.lock (для отслеживания дерева зависимостей пакетов)

Установка pip если нет

    sudo apt update
    sudo apt install python3-pip

Проверяем установился или нет

    pip3 --version

Устанавливаем pipenv

## linux

    pip install pipenv

или

    sudo apt install pipenv

## macOS

    brew install pipenv

## Debian

    sudo apt install pipenv

Проверяем установку pipenv

    pipenv --version

> Если у вас не python 3.9
> Устанавливаем python 3.9 (временное решение)
> https://itslinuxfoss.com/install-python-3-9-ubuntu-22-04/

Шаг 1. Устанавливаем зависимости из .lock файла

    pipenv sync

Шаг 2. Инициализируем окружение

    pipenv shell

> Если что-то пошло не так. Удаление окружения.

    pipenv unistall --all

Выход из окружения в терминале

    exit

## 8. Выбор конкретного окружения для конкретной папки

- Выбираем любой python файл.
- Справа внизу будет написана версия (Python 3.8.10 64-bit)
  Нажимаем ЛКМ на python 3.9 который установили

## Запуск

- перед запуском нужно убедиться что в config.py в переменной API_TOKEN за место звездочек стоит ключ апи вашего бота, как получить ключ апи https://help.puzzlebot.top/article?r=3&a=19&lang=ru#:~:text=%D0%9E%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%8C%20%D0%B2%20%D0%B4%D0%B8%D0%B0%D0%BB%D0%BE%D0%B3%20%D1%81%20%40BotFather,%D0%9E%D1%82%D0%BB%D0%B8%D1%87%D0%BD%D0%BE!,

- запуск бота рекомендуется осуществлять по команде pipenv run python main.py, но и через сам VS code запускает отлично main.py с выбранным окружением

# Структура

## Файл main.py
- это основной файл бота, там настаиваются все кнопочки, и сборка остальных компонентов проекта

## Файл money.py 
- там происходит rest запрос к ресурсу coingecko, через их открытое апи, на выходе мы получаем json из которого мы вытаскиваем стоимость интересующей валюты

## Файл user.py
- там лежит класс пользователя, с дефолтными параметрами, которые используются при настройке меню, и выдачи бана в случае когда пользователь больше 5 раз смотрит стоимость любой из валют, работа с меню осуществляется через базу данных sqlite, в которой хранятся настройки меню пользователя.